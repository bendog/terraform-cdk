---
page_title: Importing Resources - CDK for Terraform
description: >-
  TODO
---

## Importing Resources

If you have existing resources that you want to manage with CDKTF, you can import them into your CDKTF application. The best way to do this is using the [`import` block feature](/terraform/language/import) of Terraform >= 1.5. You can do this in CDKTF either with a specified configuration or without.

### How To Import

To import a resource, first instantiate an instance of the resource type you wish to import – in our case we'll be using an S3Bucket. No configuration is explicitly needed. You then call the `importFrom` method on the resource object. This method takes the ID of the resource to be imported as the first argument and the provider as an optional second. The provider is only required if you have multiple providers of the same type in your configuration.

```typescript
new S3Bucket(this, "bucket", {}).importFrom(bucketId);
```

When running plan / apply you will get the information that your resource is going to be imported. Once you have ran apply, you can remove the `importFrom` call and the resource will become managed by CDKTF.

Please note that Terraform is going to update existing fields on the imported resource to match your configuration as it puts it under management. In our case we did not define any specific properties on the `S3Bucket` which causes Terraform e.g. to remove the tags currently defined on the resource (as can be seen on the plan below). If you want to keep existing settings, you can run a plan first, add everything that Terraform would change to your resource config, and only then apply the changes.

Your output might look as follows:

```
ts-import  Initializing the backend...
ts-import  Initializing provider plugins...
ts-import  - Reusing previous version of hashicorp/aws from the dependency lock file
ts-import  - Using previously-installed hashicorp/aws v5.5.0
ts-import  Terraform has been successfully initialized!

           You may now begin working with Terraform. Try running "terraform plan" to see
           any changes that are required for your infrastructure. All Terraform commands
           should now work.

           If you ever set or change modules or backend configuration for Terraform,
           rerun this command to reinitialize your working directory. If you forget, other
           commands will detect it and remind you to do so if necessary.
ts-import  aws_s3_bucket.bucket (bucket): Preparing import... [id=best-bucket-in-the-world]
ts-import  aws_s3_bucket.bucket (bucket): Refreshing state... [id=best-bucket-in-the-world]
ts-import  Terraform used the selected providers to generate the following execution
           plan. Resource actions are indicated with the following symbols:
             ~ update in-place

           Terraform will perform the following actions:
ts-import    # aws_s3_bucket.bucket (bucket) will be updated in-place
             # (imported from "best-bucket-in-the-world")
             ~ resource "aws_s3_bucket" "bucket" {
                   arn                         = "arn:aws:s3:::best-bucket-in-the-world"
                   bucket                      = "best-bucket-in-the-world"
                   bucket_domain_name          = "best-bucket-in-the-world.s3.amazonaws.com"
                   bucket_regional_domain_name = "best-bucket-in-the-world.s3.us-east-1.amazonaws.com"
                 + force_destroy               = false
                   hosted_zone_id              = "XXXXXXXXXXXXX"
                   id                          = "best-bucket-in-the-world"
                   object_lock_enabled         = false
                   region                      = "us-east-1"
                   request_payer               = "BucketOwner"
                 ~ tags                        = {
                     - "foo" = "bar" -> null
                   }
                 ~ tags_all                    = {
                     - "foo" = "bar"
                   } -> (known after apply)

                   grant {
                       id          = "XXXXXXXXXXXXX"
                       permissions = [
                           "FULL_CONTROL",
                       ]
                       type        = "CanonicalUser"
                   }

                   server_side_encryption_configuration {
                       rule {
                           bucket_key_enabled = true

                           apply_server_side_encryption_by_default {
                               sse_algorithm = "AES256"
                           }
                       }
                   }

                   versioning {
                       enabled    = true
                       mfa_delete = false
                   }
               }

           Plan: 1 to import, 0 to add, 1 to change, 0 to destroy.

           ─────────────────────────────────────────────────────────────────────────────

           Saved the plan to: plan

           To perform exactly these actions, run the following command to apply:
               terraform apply "plan"
```

### Generate Configuration For Import

If you don't want to specify the configuration of your imported resource yourself you can use the static method `generateConfigForImport` on the class of the resource you want to import. This method takes the scope as the first argument, the construct id of the resource to import to (as will be given in the generated config returned), the resource id of the resource to be imported, and the provider as an optional fourth. The provider is only required if you have multiple providers of the same type in your configuration.

```typescript
S3Bucket.generateConfigForImport(this, "bucket", bucketId);
```

When running `cdktf plan <stack-name>` Terraform will generate code for the resource you are importing and CDKTF will convert it to the language you are using.

Your output might look as follows:

```
ts-import-with-configuration  Initializing the backend...
ts-import-with-configuration  Initializing provider plugins...
                              - Reusing previous version of hashicorp/aws from the dependency lock file
ts-import-with-configuration  - Using previously-installed hashicorp/aws v5.18.1

                              Terraform has been successfully initialized!
ts-import-with-configuration
                              You may now begin working with Terraform. Try running "terraform plan" to see
                              any changes that are required for your infrastructure. All Terraform commands
                              should now work.

                              If you ever set or change modules or backend configuration for Terraform,
                              rerun this command to reinitialize your working directory. If you forget, other
                              commands will detect it and remind you to do so if necessary.
ts-import-with-configuration  aws_s3_bucket.bucket: Preparing import... [id=best-bucket-in-the-world]
ts-import-with-configuration  aws_s3_bucket.bucket: Refreshing state... [id=best-bucket-in-the-world]
ts-import-with-configuration  Terraform will perform the following actions:
ts-import-with-configuration    # aws_s3_bucket.bucket will be imported
                                # (config will be generated)
                                  resource "aws_s3_bucket" "bucket" {
                                      arn                         = "arn:aws:s3:::best-bucket-in-the-world"
                                      bucket                      = "best-bucket-in-the-world"
                                      bucket_domain_name          = "best-bucket-in-the-world.s3.amazonaws.com"
                                      bucket_regional_domain_name = "best-bucket-in-the-world.s3.us-east-1.amazonaws.com"
                                      hosted_zone_id              = "Z3AQBSTGFYJSTF"
                                      id                          = "best-bucket-in-the-world"
                                      object_lock_enabled         = false
                                      region                      = "us-east-1"
                                      request_payer               = "BucketOwner"
                                      tags                        = {}
                                      tags_all                    = {}

                                      grant {
                                          id          = "554912fda2704333d162d216be50aefb05562e0bf1709997f1d9417cf46087d5"
                                          permissions = [
                                              "FULL_CONTROL",
                                          ]
                                          type        = "CanonicalUser"
                                      }

                                      server_side_encryption_configuration {
                                          rule {
                                              bucket_key_enabled = true

                                              apply_server_side_encryption_by_default {
                                                  sse_algorithm = "AES256"
                                              }
                                          }
                                      }

                                      versioning {
                                          enabled    = false
                                          mfa_delete = false
                                      }
                                  }

                              Plan: 1 to import, 0 to add, 0 to change, 0 to destroy.
                              ╷
                              │ Warning: Config generation is experimental
                              │
                              │ Generating configuration during import is currently experimental, and the
                              │ generated configuration format may change in future versions.
                              ╵

                              ─────────────────────────────────────────────────────────────────────────────

                              Terraform has generated configuration and written it to
                              generated_resources.tf. Please review the configuration and edit it as
                              necessary before adding it to version control.

                              Saved the plan to: plan

                              To perform exactly these actions, run the following command to apply:
                                  terraform apply "plan"
ts-import-with-configuration  Import without configuration detected. Terraform has created configuration for it:
                              # __generated__ by Terraform
                              # Please review these resources and move them into your main configuration files.

                              # __generated__ by Terraform from "best-bucket-in-the-world"
                              resource "aws_s3_bucket" "bucket" {
                                bucket              = "best-bucket-in-the-world"
                                bucket_prefix       = null
                                force_destroy       = null
                                object_lock_enabled = false
                                tags                = {}
                                tags_all            = {}
                              }


                              CDKTF has translated the code to the following:

                              import { Construct } from "constructs";
                              /*
                               * Provider bindings are generated by running `cdktf get`.
                               * See https://cdk.tf/provider-generation for more details.
                               */
                              import { S3Bucket } from "./.gen/providers/aws/s3-bucket";
                              class MyConvertedCode extends Construct {
                                constructor(scope: Construct, name: string) {
                                  super(scope, name);
                                  new S3Bucket(this, "bucket", {
                                    bucket: "best-bucket-in-the-world",
                                    bucketPrefix: [null],
                                    forceDestroy: [null],
                                    objectLockEnabled: false,
                                    tags: {},
                                    tagsAll: {},
                                  });
                                }
                              }


                              Please review the code and make any necessary changes before adding it to your codebase.
                              Make sure to only copy the code within the construct's constructor.

                              NOTE: Your resource has not yet become managed by CDKTF.
                              To finish the import remove the call "generateConfigForImport", add the above code within the construct's constructor, and then append the call importFrom(<resource_id_to_import_from>) to the generated code:

                              new SomeResource(...).importFrom("some_id")
```

Though at this point, your resource has not been imported. To import, first add the new generated configuration to your project, then remove the initial call of `generateConfigForImport`. Finally, follow the steps outlined in the section "How To Import" above. On apply, your resource will be imported, then becoming managed by CDKTF.
